<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’– Ø³Ø§ÛŒØª Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ù…Ø§</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; color: white; }
        .header h1 { font-family: 'Pacifico', cursive; font-size: 3rem; margin-bottom: 10px; }
        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Vazirmatn', sans-serif;
            margin-top: 10px;
        }
        .logout-btn:hover { background: white; color: #667eea; }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .tab {
            background: white;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .tab:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
        .tab.active { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.5s ease;
        }
        .tab-content.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .kiss-counter { text-align: center; }
        .kiss-number {
            font-size: 5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 30px 0;
        }
        .kiss-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
        }
        .kiss-btn:hover { transform: scale(1.1); box-shadow: 0 8px 30px rgba(245, 87, 108, 0.6); }
        .reset-btn { background: #666; color: white; border: none; padding: 10px 30px; border-radius: 10px; cursor: pointer; margin-top: 20px; }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .gallery-item { background: #f5f5f5; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); }
        .gallery-item img { width: 100%; height: 250px; object-fit: cover; }
        .gallery-caption { padding: 15px; }
        .gallery-date { color: #999; font-size: 0.9rem; margin-top: 5px; }
        .add-photo-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            margin-bottom: 20px;
        }
        .note-item { background: #fff9c4; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1); }
        .note-date { color: #666; font-size: 0.85rem; margin-top: 10px; }
        .delete-btn { background: #f44336; color: white; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; float: left; margin-top: 10px; }
        .todo-item { background: #f5f5f5; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .todo-item.completed { text-decoration: line-through; opacity: 0.6; }
        .todo-checkbox { width: 20px; height: 20px; cursor: pointer; }
        .chat-container { height: 400px; overflow-y: auto; background: #f5f5f5; padding: 20px; border-radius: 15px; margin-bottom: 20px; }
        .chat-message { margin-bottom: 15px; display: flex; gap: 10px; }
        .chat-message.ali { justify-content: flex-end; }
        .chat-bubble { max-width: 60%; padding: 12px 18px; border-radius: 18px; background: white; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        .chat-message.ali .chat-bubble { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .chat-time { font-size: 0.75rem; color: #999; margin-top: 5px; }
        .chat-input-container { display: flex; gap: 10px; }
        .chat-input { flex: 1; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-family: 'Vazirmatn', sans-serif; }
        .send-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 30px; border-radius: 10px; cursor: pointer; }
        .music-item { background: #f5f5f5; padding: 15px; border-radius: 10px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .music-info h3 { margin-bottom: 5px; }
        .music-artist { color: #666; font-size: 0.9rem; }
        .play-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 1rem;
        }
        textarea { min-height: 100px; resize: vertical; }
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
        }
        .login-container {
            background: white;
            padding: 50px 40px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            margin: 100px auto;
        }
        .heart-icon { font-size: 4rem; margin-bottom: 20px; }
        .login-title {
            font-family: 'Pacifico', cursive;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
        }
        input[type="password"] {
            width: 100%;
            padding: 15px 20px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1.1rem;
            text-align: center;
            letter-spacing: 3px;
        }
        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .error-msg { color: #f5576c; margin-top: 15px; display: none; }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
        const SUPABASE_URL='https://beknooiptdlespqxcfpt.supabase.co';
        const SUPABASE_KEY='sb_publishable_XYDCUqTTxmO1-jl73JhRFA_siNtwS91';
        const db=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);
        const PASSWORD='AG001';
        let isAuthenticated=false,currentTab='kiss',currentUser='';
        function checkAuth(){isAuthenticated=sessionStorage.getItem('authenticated')==='true';currentUser=sessionStorage.getItem('currentUser')||'';}
        function renderLogin(){document.getElementById('app').innerHTML='<div class="login-container"><div class="heart-icon">ğŸ’–</div><h1 class="login-title">Ø³Ø§ÛŒØª Ù…Ø§</h1><p style="color:#666;margin-bottom:20px">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p><input type="password" id="passwordInput" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" onkeypress="if(event.key===\'Enter\')login()"><button class="login-btn" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§ÛŒØª â¤ï¸</button><div class="error-msg" id="errorMsg">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!</div></div>';}
        function login(){const p=document.getElementById('passwordInput').value;if(p===PASSWORD){sessionStorage.setItem('authenticated','true');sessionStorage.setItem('currentUser','ali');isAuthenticated=true;currentUser='ali';init();}else{document.getElementById('errorMsg').style.display='block';}}
        function logout(){sessionStorage.clear();isAuthenticated=false;renderLogin();}
        function renderApp(){document.getElementById('app').innerHTML=`<div class="container"><div class="header"><h1>ğŸ’– Ø³Ø§ÛŒØª Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ù…Ø§</h1><p>Ø³Ù„Ø§Ù… ${currentUser==='ali'?'Ø¹Ù„ÛŒ':'Ú¯Ù†Ø¯Ù…'} Ø¹Ø²ÛŒØ²! ğŸ’•</p><button class="logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button></div><div class="tabs"><div class="tab ${currentTab==='kiss'?'active':''}" onclick="switchTab('kiss')">ğŸ’‹ Ø¨ÙˆØ³â€ŒÙ‡Ø§</div><div class="tab ${currentTab==='gallery'?'active':''}" onclick="switchTab('gallery')">ğŸ“· Ú¯Ø§Ù„Ø±ÛŒ</div><div class="tab ${currentTab==='notes'?'active':''}" onclick="switchTab('notes')">ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</div><div class="tab ${currentTab==='todos'?'active':''}" onclick="switchTab('todos')">âœ… Ú©Ø§Ø±Ù‡Ø§</div><div class="tab ${currentTab==='chat'?'active':''}" onclick="switchTab('chat')">ğŸ’¬ Ú†Øª</div><div class="tab ${currentTab==='music'?'active':''}" onclick="switchTab('music')">ğŸµ Ù…ÙˆØ²ÛŒÚ©</div></div><div id="kiss-tab" class="tab-content ${currentTab==='kiss'?'active':''}"><div class="kiss-counter"><h2>ğŸ’‹ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨ÙˆØ³â€ŒÙ‡Ø§ÛŒ Ù…Ø§</h2><div class="kiss-number" id="kissCount">0</div><button class="kiss-btn" onclick="addKiss()">ğŸ’‹ Ø¨ÙˆØ³!</button><br><button class="reset-btn" onclick="resetKiss()">ğŸ”„ Ø±ÛŒØ³Øª</button></div></div><div id="gallery-tab" class="tab-content ${currentTab==='gallery'?'active':''}"><h2>ğŸ“· Ú¯Ø§Ù„Ø±ÛŒ Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø§</h2><button class="add-photo-btn" onclick="showAddPhotoForm()">â• Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¹Ú©Ø³</button><div id="addPhotoForm" style="display:none;margin-bottom:20px"><input type="text" id="photoUrl" placeholder="Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ (Ø§Ø² imgur ÛŒØ§ imgbb)"><textarea id="photoCaption" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª..."></textarea><button class="submit-btn" onclick="addPhoto()">Ø°Ø®ÛŒØ±Ù‡ Ø¹Ú©Ø³</button></div><div class="gallery-grid" id="galleryGrid"></div></div><div id="notes-tab" class="tab-content ${currentTab==='notes'?'active':''}"><h2>ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø§</h2><textarea id="noteText" placeholder="ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù†ÙˆÛŒØ³..."></textarea><button class="submit-btn" onclick="addNote()">Ø°Ø®ÛŒØ±Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button><div id="notesList" style="margin-top:20px"></div></div><div id="todos-tab" class="tab-content ${currentTab==='todos'?'active':''}"><h2>âœ… Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø§</h2><input type="text" id="todoText" placeholder="Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†..." onkeypress="if(event.key===\'Enter\')addTodo()"><button class="submit-btn" onclick="addTodo()">Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</button><div id="todosList" style="margin-top:20px"></div></div><div id="chat-tab" class="tab-content ${currentTab==='chat'?'active':''}"><h2>ğŸ’¬ Ú†Øª Ù…Ø§</h2><div class="chat-container" id="chatContainer"></div><div class="chat-input-container"><input type="text" class="chat-input" id="chatInput" placeholder="Ù¾ÛŒØ§Ù… Ø¨Ù†ÙˆÛŒØ³..." onkeypress="if(event.key===\'Enter\')sendMessage()"><button class="send-btn" onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button></div></div><div id="music-tab" class="tab-content ${currentTab==='music'?'active':''}"><h2>ğŸµ Ø¢Ù‡Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø§</h2><input type="text" id="musicTitle" placeholder="Ù†Ø§Ù… Ø¢Ù‡Ù†Ú¯"><input type="text" id="musicArtist" placeholder="Ø®ÙˆØ§Ù†Ù†Ø¯Ù‡"><input type="text" id="musicUrl" placeholder="Ù„ÛŒÙ†Ú© YouTube ÛŒØ§ Spotify"><button class="submit-btn" onclick="addMusic()">Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¢Ù‡Ù†Ú¯</button><div id="musicList" style="margin-top:20px"></div></div></div>`;}
        function switchTab(t){currentTab=t;renderApp();loadData();}
        async function loadData(){if(currentTab==='kiss')await loadKissCount();if(currentTab==='gallery')await loadGallery();if(currentTab==='notes')await loadNotes();if(currentTab==='todos')await loadTodos();if(currentTab==='chat')await loadChat();if(currentTab==='music')await loadMusic();}
        async function loadKissCount(){try{const{data}=await db.from('kiss_counter').select('count').single();if(data)document.getElementById('kissCount').textContent=data.count;}catch(e){}}
        async function addKiss(){try{const{data:c}=await db.from('kiss_counter').select('count').single();const n=(c?.count||0)+1;await db.from('kiss_counter').upsert({id:1,count:n});document.getElementById('kissCount').textContent=n;}catch(e){}}
        async function resetKiss(){if(confirm('Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±Ùˆ Ø±ÛŒØ³Øª Ú©Ù†ÛŒØŸ')){await db.from('kiss_counter').upsert({id:1,count:0});document.getElementById('kissCount').textContent='0';}}
        function showAddPhotoForm(){const f=document.getElementById('addPhotoForm');f.style.display=f.style.display==='none'?'block':'none';}
        async function addPhoto(){const u=document.getElementById('photoUrl').value,c=document.getElementById('photoCaption').value;if(!u){alert('Ù„Ø·ÙØ§Ù‹ Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†!');return;}try{await db.from('gallery').insert([{image_url:u,caption:c,created_at:new Date().toISOString()}]);document.getElementById('photoUrl').value='';document.getElementById('photoCaption').value='';document.getElementById('addPhotoForm').style.display='none';loadGallery();}catch(e){}}
        async function loadGallery(){try{const{data}=await db.from('gallery').select('*').order('created_at',{ascending:false});const g=document.getElementById('galleryGrid');g.innerHTML=data?.map(i=>`<div class="gallery-item"><img src="${i.image_url}" alt="${i.caption}"><div class="gallery-caption"><p>${i.caption}</p><p class="gallery-date">${new Date(i.created_at).toLocaleDateString('fa-IR')}</p><button class="delete-btn" onclick="deletePhoto(${i.id})">Ø­Ø°Ù</button></div></div>`).join('')||'<p>Ù‡Ù†ÙˆØ² Ø¹Ú©Ø³ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡!</p>';}catch(e){}}
        async function deletePhoto(i){if(confirm('Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§ÛŒÙ† Ø¹Ú©Ø³ Ø±Ùˆ Ø­Ø°Ù Ú©Ù†ÛŒØŸ')){await db.from('gallery').delete().eq('id',i);loadGallery();}}
        async function addNote(){const t=document.getElementById('noteText').value;if(!t)return;try{await db.from('notes').insert([{text:t,created_at:new Date().toISOString()}]);document.getElementById('noteText').value='';loadNotes();}catch(e){}}
        async function loadNotes(){try{const{data}=await db.from('notes').select('*').order('created_at',{ascending:false});const l=document.getElementById('notesList');l.innerHTML=data?.map(n=>`<div class="note-item"><p>${n.text}</p><p class="note-date">${new Date(n.created_at).toLocaleDateString('fa-IR')}</p><button class="delete-btn" onclick="deleteNote(${n.id})">Ø­Ø°Ù</button></div>`).join('')||'<p>Ù‡Ù†ÙˆØ² ÛŒØ§Ø¯Ø¯Ø§Ø´ØªÛŒ Ù†ÛŒØ³Øª!</p>';}catch(e){}}
        async function deleteNote(i){await db.from('notes').delete().eq('id',i);loadNotes();}
        async function addTodo(){const t=document.getElementById('todoText').value;if(!t)return;try{await db.from('todos').insert([{text:t,completed:false,created_at:new Date().toISOString()}]);document.getElementById('todoText').value='';loadTodos();}catch(e){}}
        async function loadTodos(){try{const{data}=await db.from('todos').select('*').order('created_at',{ascending:false});const l=document.getElementById('todosList');l.innerHTML=data?.map(t=>`<div class="todo-item ${t.completed?'completed':''}"><input type="checkbox" class="todo-checkbox" ${t.completed?'checked':''} onchange="toggleTodo(${t.id},${!t.completed})"><span style="flex:1">${t.text}</span><button class="delete-btn" onclick="deleteTodo(${t.id})">Ø­Ø°Ù</button></div>`).join('')||'<p>Ù‡Ù†ÙˆØ² Ú©Ø§Ø±ÛŒ Ù†ÛŒØ³Øª!</p>';}catch(e){}}
        async function toggleTodo(i,c){await db.from('todos').update({completed:c}).eq('id',i);loadTodos();}
        async function deleteTodo(i){await db.from('todos').delete().eq('id',i);loadTodos();}
        async function sendMessage(){const t=document.getElementById('chatInput').value;if(!t)return;try{await db.from('chats').insert([{sender:currentUser,message:t,created_at:new Date().toISOString()}]);document.getElementById('chatInput').value='';loadChat();}catch(e){}}
        async function loadChat(){try{const{data}=await db.from('chats').select('*').order('created_at',{ascending:true});const c=document.getElementById('chatContainer');c.innerHTML=data?.map(m=>`<div class="chat-message ${m.sender}"><div class="chat-bubble"><p>${m.message}</p><p class="chat-time">${new Date(m.created_at).toLocaleTimeString('fa-IR',{hour:'2-digit',minute:'2-digit'})}</p></div></div>`).join('')||'<p style="text-align:center;color:#999">Ù‡Ù†ÙˆØ² Ù¾ÛŒØ§Ù…ÛŒ Ù†ÛŒØ³Øª!</p>';c.scrollTop=c.scrollHeight;}catch(e){}}
        async function addMusic(){const t=document.getElementById('musicTitle').value,a=document.getElementById('musicArtist').value,u=document.getElementById('musicUrl').value;if(!t||!u){alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø¢Ù‡Ù†Ú¯ Ùˆ Ù„ÛŒÙ†Ú© Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†!');return;}try{await db.from('music').insert([{title:t,artist:a||'Ù†Ø§Ù…Ø´Ø®Øµ',url:u,created_at:new Date().toISOString()}]);document.getElementById('musicTitle').value='';document.getElementById('musicArtist').value='';document.getElementById('musicUrl').value='';loadMusic();}catch(e){}}
        async function loadMusic(){try{const{data}=await db.from('music').select('*').order('created_at',{ascending:false});const l=document.getElementById('musicList');l.innerHTML=data?.map(s=>`<div class="music-item"><div class="music-info"><h3>${s.title}</h3><p class="music-artist">${s.artist}</p></div><div><button class="play-btn" onclick="window.open('${s.url}','_blank')">â–¶ï¸ Ù¾Ø®Ø´</button><button class="delete-btn" onclick="deleteMusic(${s.id})">Ø­Ø°Ù</button></div></div>`).join('')||'<p>Ù‡Ù†ÙˆØ² Ø¢Ù‡Ù†Ú¯ÛŒ Ù†ÛŒØ³Øª!</p>';}catch(e){}}
        async function deleteMusic(i){await db.from('music').delete().eq('id',i);loadMusic();}
        function init(){checkAuth();if(isAuthenticated){renderApp();loadData();}else{renderLogin();}}
        init();
    </script>
</body>
</html>
